#!/usr/bin/env bash

set -euo pipefail

echo "üîß Running post-checkout hook..."

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏
BIN_DIR="$HOME/.local/bin"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
if [ ! -d "$BIN_DIR" ]; then
    echo "Directory $BIN_DIR does not exist, skipping..."
    exit 0
fi

echo "Processing scripts in $BIN_DIR"

# 1. –ù–∞—Ö–æ–¥–∏–º –í–°–ï .sh —Ñ–∞–π–ª—ã –∏ –¥–µ–ª–∞–µ–º –∏—Ö –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
echo "1. Setting +x for all .sh files..."
find "$BIN_DIR" -type f -name "*.sh" | while read -r script; do
    if [ -f "$script" ]; then
        chmod +x "$script"
        echo "   ‚úì $(basename "$script")"
    fi
done
echo "‚úÖ post-checkout hook completed!"
